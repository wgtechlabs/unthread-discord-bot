# =============================================================================
# PNPM Configuration
# =============================================================================
# This configuration file defines pnpm settings for optimal performance,
# security, and development experience.
#
# For more information: https://pnpm.io/npmrc
# =============================================================================

# Node.js version management
# Use the Node.js version specified in package.json engines field
# use-node-version=20.0.0

# Strict peer dependencies
# Fail installation if peer dependencies are not met
strict-peer-dependencies=true

# Auto-install peers
# Automatically install peer dependencies
auto-install-peers=true

# Shamefully hoist
# Disabled - use pnpm's default isolated node_modules structure
shamefully-hoist=false

# Public hoist pattern
# Hoist only necessary packages to root for compatibility
public-hoist-pattern[]=*eslint*
public-hoist-pattern[]=*prettier*

# Node linker
# Use isolated mode for better dependency management
node-linker=isolated

# Enable lockfile
# Always generate and use pnpm-lock.yaml
lockfile=true

# Lockfile version
# Use latest lockfile format for optimal performance
lockfile-version=true

# Package import method
# Use hardlinks for faster installation and disk efficiency
package-import-method=auto

# Resolution mode
# Use highest version when resolving dependencies
resolution-mode=highest

# Engine strict
# Enforce Node.js version from package.json engines field
engine-strict=true

# Save exact
# Save exact versions in package.json (not ranges)
save-exact=false

# Store directory
# Use default pnpm store location
# store-dir=~/.pnpm-store

# Verify store integrity
# Check store integrity before installation
verify-store-integrity=true

# Prefer frozen lockfile
# Use frozen lockfile in CI environments
# frozen-lockfile is set via CLI in CI/CD

# Ignore workspace root check
# Allow running pnpm in workspace root
ignore-workspace-root-check=false

# Dedupe peer dependents
# Deduplicate peer dependents for smaller node_modules
dedupe-peer-dependents=true

# =============================================================================
# Security Settings
# =============================================================================

# Registry
registry=https://registry.npmjs.org/

# Side effects cache
# Enable for better performance
side-effects-cache=true

# Side effects cache readonly
# Allow writing to cache
side-effects-cache-readonly=false

# =============================================================================
# Performance Settings
# =============================================================================

# Network concurrency
# Number of concurrent network requests
network-concurrency=16

# Fetch retries
# Number of times to retry failed network requests
fetch-retries=2

# Fetch retry factor
# Exponential backoff factor for retries
fetch-retry-factor=10

# Fetch retry mintimeout
# Minimum time before first retry
fetch-retry-mintimeout=10000

# Fetch retry maxtimeout
# Maximum time before retry
fetch-retry-maxtimeout=60000

# =============================================================================
# Development Settings
# =============================================================================

# Recursive install
# Enable recursive installation for monorepos
recursive-install=true

# Link workspace packages
# Link workspace packages during development
link-workspace-packages=true

# Prefer workspace packages
# Prefer workspace packages over registry packages
prefer-workspace-packages=false

# Shared workspace lockfile
# Use single lockfile for all workspace packages
shared-workspace-lockfile=true
